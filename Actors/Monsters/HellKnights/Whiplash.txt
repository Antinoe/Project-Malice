Actor PM_Whiplash : PMMonster
{
  Health 450
  Radius 25
  Height 64
  Mass 1000
  Speed 8
  Scale 1.15
  PainChance 120
  RadiusDamageFactor 0.5
  Monster
  //DropItem "RagePoint1"
  +FloorClip
  +BOSSDEATH
  //+NOINFIGHTING
  +DONTHARMSPECIES
  +Donthurtspecies
  +MISSILEevenMORE
  Obituary "%o couldn't evade the Whiplash's cursed blades!"
  SeeSound "WHIPSEE"
  ActiveSound "WHIPACT"
  PainSound "WHIPPAI"
  DeathSound "WHIPDIE"
  Tag "Whiplash"
  Species "Nobles"
  States
  {
  Spawn:
	  WHIP A 5 A_Look
	  Loop
  See:
	TNT1 A 0 A_SetSpeed(8)
	VORE A 0 A_ChangeFlag("NOPAIN",0)
    WHIP AAAAA 2 A_Chase
    WHIP BBBBB 2 A_Chase
	TNT1 A 0 A_Jump(70,"SlideLeft","SlideRight")
    WHIP CCCCC 2 A_Chase
    WHIP DDDDD 2 A_Chase
	TNT1 A 0 A_Jump(150,"Slither","SlitherWander")
	Loop
  Slither:
	TNT1 A 0 A_PlaySound("WHIPFLA")
	TNT1 A 0 A_SetSpeed(12)
	WHIP VVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVV 1 Bright
	{
	A_Chase(0,0);
	A_SpawnItem("CrawlTrail");
	}
	Goto See
  SlitherWander:
	TNT1 A 0 A_PlaySound("WHIPFLA")
	TNT1 A 0 A_SetSpeed(12)
	WHIP VVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVVWWWWVVVVXXXXVVVV 1 Bright
	{
	A_Wander;
	A_SpawnItem("CrawlTrail");
	}
	Goto See
  SlideLeft:
	WHIP AAAAA 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	WHIP BBBBB 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	WHIP AAAAA 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	WHIP BBBBB 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	WHIP AAAAA 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	WHIP BBBBB 2
	{
	A_Chase;
	A_FaceTarget;
	strafeL;
	}
	Goto See
  SlideRight:
	WHIP CCCCC 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	WHIP DDDDD 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	WHIP CCCCC 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	WHIP DDDDD 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	WHIP CCCCC 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	WHIP DDDDD 2
	{
	A_Chase;
	A_FaceTarget;
	strafeR;
	}
	Goto See
  Missile:
	TNT1 A 0 A_Jump(200,"KnifeThrow1","KnifeThrow2","SlitherWander","DumDumTumTumFuckFuckWhyWhy")
	TNT1 A 0 A_Jump(210,"Missile2","Missile3","DumDumTumTumFuckFuckWhyWhy")
	Goto DumDumTumTumFuckFuckWhyWhy
   DumDumTumTumFuckFuckWhyWhy:
	TNT1 A 0 A_Jump(256,"Missile4","Missile45")
	Goto See
   KnifeThrow1:
	TNT1 A 0 A_ChangeFlag("NODROPOFF",true)
	TNT1 A 0 ThrustThing(angle*256/360 +64, 7, 0, 0)
	WHIP EEEEEEFF 2 Light("WhipKnife2") A_FaceTarget
	WHIP G 8 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48)
	WHIP F 8 A_FaceTarget
	TNT1 A 0 A_ChangeFlag("NODROPOFF",false)
	Goto See
   KnifeThrow2:
	TNT1 A 0 A_ChangeFlag("NODROPOFF",true)
	TNT1 A 0 ThrustThing(angle*256/360 +192, 7, 0, 0)
	WHIP EEEEEEFF 2 Light("WhipKnife2") A_FaceTarget
	WHIP G 8 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48)
	WHIP F 8 A_FaceTarget
	TNT1 A 0 A_ChangeFlag("NODROPOFF",false)
	Goto See
  Missile2:
	TNT1 A 0 A_PlaySound("WHIPSHA")
	WHI2 EEEEEEEE 2 Light("WhipKnife") A_FaceTarget
	WHIP EE 2 Light("WhipKnife") A_FaceTarget
	WHIP F 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,-12)
	TNT1 A 0 A_FaceTarget
	WHIP F 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,0)
	TNT1 A 0 A_FaceTarget
	WHIP G 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,12)
	TNT1 A 0 A_FaceTarget
	WHIP F 8 A_FaceTarget
	Goto See
  Missile3:
	TNT1 A 0 A_PlaySound("WHIPSHA")
	WHI2 EEEEEEEE 2 Light("WhipKnife") A_FaceTarget
	WHIP EE 2 Light("WhipKnife") A_FaceTarget
	WHIP F 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,12)
	TNT1 A 0 A_FaceTarget
	WHIP F 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,0)
	TNT1 A 0 A_FaceTarget
	WHIP G 4 Light("WhipKnife") A_CustomMissile("PM_WhiplashKnife",48,0,-12)
	TNT1 A 0 A_FaceTarget
	WHIP F 8 A_FaceTarget
	Goto See
  Missile4:
  TNT1 A 0
  {
    if (!target_is_on_floor())
    {
      return state("Missile");
    }
    return state("0");
  }
	TNT1 A 0 A_PlaySound("IMPCHARG")
	TNT1 A 0 A_ChangeFlag("NODROPOFF",true)
	TNT1 A 0 ThrustThing(angle*256/360 +64, 20, 0, 0)
	WHIP U 1 A_FaceTarget
	WHIP UUUUUUUU 1 A_SpawnItem("CrawlTrail")
	WHIP EEEEEEEEEEEE 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrbSmall",14,17,37);
	}
	TNT1 A 0 A_PlaySound("WHIGFIR")
	WHIP FF 1 A_FaceTarget
	WHIP G 8 Light("WhipKnife") A_CustomMissile("PM_WhiplashGroundSeeker")
	WHIP F 5 A_FaceTarget
	TNT1 A 0 A_Recoil(5)
	TNT1 A 0 A_Jump(50,"Missile4","Missile45")
	TNT1 A 0 A_ChangeFlag("NODROPOFF",false)
	Goto See
  Missile45:
  TNT1 A 0
  {
    if (!target_is_on_floor())
    {
      return state("Missile");
    }
    return state("0");
  }
	TNT1 A 0 A_PlaySound("IMPCHARG")
	TNT1 A 0 A_ChangeFlag("NODROPOFF",true)
	TNT1 A 0 ThrustThing(angle*256/360 +192, 20, 0, 0)
	WHIP U 1 A_FaceTarget
	WHIP UUUUUUUU 1 A_SpawnItem("CrawlTrail")
	WHIP EEEEEEEEEEEE 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrbSmall",14,17,37);
	}
	TNT1 A 0 A_PlaySound("WHIGFIR")
	WHIP FF 1 A_FaceTarget
	WHIP G 8 Light("WhipKnife") A_CustomMissile("PM_WhiplashGroundSeeker")
	WHIP F 5 A_FaceTarget
	TNT1 A 0 A_Recoil(5)
	TNT1 A 0 A_Jump(50,"Missile4","Missile45")
	TNT1 A 0 A_ChangeFlag("NODROPOFF",false)
	Goto See
  Missile5:
  TNT1 A 0
  {
    if (!target_is_on_floor())
    {
      return state("Missile");
    }
    return state("0");
  }
	TNT1 A 0 A_PlaySound("IMPCHARG")
	WHIP FFEE 2 A_FaceTarget
	WHI2 HHHHHHHHHHHHHHHHHHHHHHHHHHHHHH 1 Light("WhipKnife2")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,0,0,random(1,2));
	}
	TNT1 A 0 A_VileTarget("GroundSpikeSeeker")
	WHI2 H 1 Light("WhipKnife")
	{
	A_PlaySound("WHIGSUM");
	A_FaceTarget;
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleFireEffect",14,random(7,12),75,random(-6,6),random(-6,6),random(-6,6),random(0,360));
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 HHHHHHHHHHHHH 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 H 1 Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 HHHHHHHHHHHHH 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 H 1 Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 HHHHHHHHHHHHH 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 H 1 Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 HHHHHHHHHHHHH 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 H 1 Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 HHHHHHHHHHHHH 1 Light("WhipKnife")
	{
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHI2 H 1 Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",14,random(7,12),75,0,0,random(1,2));
	A_FaceTarget;
	A_SpawnItemEx("PurpleOrb",14,9,75);
	}
	WHIP EF 3 A_FaceTarget
	Goto See
  Melee:
	WHIP EF 3 A_FaceTarget
	WHIP G 3 A_CustomMeleeAttack(3)
	Goto See
  Pain:
	WHIP H 4
	WHIP H 4 A_Pain
	Goto See
  Death:
	WHIP I 12 A_Scream
	WHIP J 8 A_NoBlocking
	WHIP K 5
	TNT1 A 0 A_PlaySound("Corpse/FallMed",CHAN_6)
	WHIP L -1 A_bossdeath
	Stop
  XDeath:
	WHIP M 3 A_XScream
	WHIP N 3 A_NoBlocking
	WHIP OPQRS 3
	WHIP T -1
	Stop
  }
}

Actor GroundSpikeSeeker
{
	Speed 0
	Radius 20
    Height 56
	Mass 40
	Monster
	Species "Hellknight"
	+DONTHURTSPECIES
	+THRUACTORS
	MaxStepHeight 64
	MaxDropOffHeight 64
	-COUNTKILL
	States
	{
	Spawn:
		TNT1 A 0 A_PlaySound("IMPCHARG",CHAN_7)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_SpawnItemEx("PurpleFireEffect",random(-20,20),random(-20,20),0,0,0,random(1,2))
		TNT1 A 0 A_PlaySound("Whiplash/Ground",CHAN_6)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-90,90),random(-90,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
	Die:
		Stop
	}
}

ACTOR PM_WhiplashGroundSeeker
{
   Radius 12
   Height 64
   Speed 16
   Damage (1)
   XScale 1.2
   YScale 1.0
   ExplosionDamage 8
   ExplosionRadius 8
   RenderStyle ADD
   DamageType fire
   Alpha 1
   PROJECTILE
   Reactiontime 10
   Translation "0:255=%[0,0,0]:[2.0,0.4,1.8]"
   +FLOORHUGGER
   +THRUGHOST
   -NOGRAVITY
   +DONTSPLASH
   +SEEKERMISSILE
	DeathSound "Whiplash/Ground"
   States
   {
   Spawn: 
	TNT1 A 1
	TNT1 A 0 A_PlaySound("Whiplash/GroundLoop",CHAN_7,0.7,1)
	Go:
		FLME ABCDEFGHIJKLM 1 Bright Light("WhipKnife") 
		{
		//A_SpawnItemEx("PM_LargerRedFlare",0,0,10);
		A_SeekerMissile (1,1);
		A_SpawnItem("PM_WhiplashGroundFlameTrail");
		}
		TNT1 A 0 Bright A_CountDown
		Loop
   Death:
	  TNT1 A 0 A_StopSound(CHAN_7)
	  FLME ABCD 1 Bright Light("WhipKnife") 
	  TNT1 A 0 A_SpawnItemEx("PurpleShockwave",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
	  TNT1 A 0 A_PlaySound("WHIPHIT",CHAN_5)
	  TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-50,30),random(-50,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
	  TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-50,30),random(-50,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
	  TNT1 A 0 A_SpawnItemEx("PM_WhipFloorSpike",random(-50,30),random(-50,30),0,0,0,0,0,SXF_NOCHECKPOSITION)
      stop
   }
}

Actor PurpleFireEffect
{
  +NOINTERACTION
  +CLIENTSIDEONLY
  +ROLLSPRITE
  +FORCEXYBILLBOARD
  Renderstyle Add
  Scale 0.4
  +Bright
  States
  {
  Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360))
	TNT1 A 0 A_SetScale(ScaleX-0.05)
	FIR1 P 1 A_FadeOut(0.08)
	Wait
	}
}

ACTOR WhiplashFloorSpawner
{
  Radius 5
  Height 5
  Speed 13
  Damage 1
  Scale 1
  +Ripper
  +FLOORHUGGER
  +BLOODLESSIMPACT
  +THRUSPECIES
  +DONTHURTSPECIES
  Species "Hellknight"
  SeeSound "Husk/Charge"
  Projectile
  Missileheight 0
  States
  {
  Spawn:
	TNT1 A 0 A_PlaySound("Husk/Charge",CHAN_6)
    TNT1 A 5 Bright Light("WhipKnife")
	{
	A_SpawnItemEx("PurpleShockwave",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION);
	A_PlaySound("WHIPHIT",CHAN_5);
	A_SpawnItemEx("PM_WhipFloorSpike",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION);
	}
    Goto Spawn+1
  Death:
    TNT1 A 1
    Stop
  }
}

Actor PM_WhipFloorSpike
{
    Radius 8
    Height 28
    Speed 0
    Scale 1.4
	Damage 1
	Species "Hellknight"
	+DONTHURTSPECIES
    RenderStyle "Add"
    Alpha 1
    Projectile
    +Ripper
  States
  {
  Spawn:
	TNT1 A 0 A_SpawnItemEx("PurpleShockwave",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
    BLA3 GFEDCB 1 Bright Light("WhipKnife")
	BLA3 AAAAAAAAAAAAAAAA 1 Bright Light("WhipKnife2")
	BLA3 AAAAAAAAAAAAAAAAAAAAABCDEFG 2 Bright
	Stop
  }
}

Actor CrawlTrail
{
    Radius 2
    Height 2
    Speed 0
    Scale 1
    RenderStyle "Translucent"
    Alpha 0.4
    Projectile
    +ClientSideOnly
  States
  {
  Spawn:
    TNT1 A 3
    WHIP U 3 A_FadeOut(0.15)
    Goto Spawn+1
  }
}

ACTOR PM_WhiplashKnife : MageWandMissile
{
  damage 3
  Scale 1.8
  Speed 22
  radius 2
  height 4
  -RIPPER
  RenderStyle Add
  Seesound "WHIPBLA"
  deathsound "WHIPHIT"
  States
  {
  Spawn:
    BLA2 A 1 BRIGHT Light("WhipKnife")
	{
	A_SpawnItemEX("WKnifeBlur");
	A_SpawnItemEX("WKnifeBlur2");
	}
    loop
  Death:
    BLA2 A 80 BRIGHT Light("WhipKnife2")
  XDeath:
	BLA2 A 1
    stop
  }
}

Actor WKnifeBlur
{
   Height 8
   Radius 1
   Damage 0
   Scale 1.5
   Speed 0.2
   RenderStyle Add
   Alpha 0.75
   +NOGRAVITY
   +DROPOFF
   +CLIENTSIDEONLY
   States
   {
   Spawn:
   TNT1 A 2
	Go:
      BLA2 A 1 A_FadeOut(0.14)
      Loop
   }
}

Actor WKnifeBlur2
{
    Radius 1
    Height 1
    Speed 0
	Scale 0.8
    ALPHA 0.6
    PROJECTILE
	RenderStyle Add
	+NOINTERACTION
	+CLIENTSIDEONLY
	+NOBLOCKMAP
	+THRUACTORS
	+DONTSPLASH
    +NOCLIP
  States
  {
  Spawn:
  TNT1 A 3
  Go:
    WHTR ABCDEF 2 Bright
    Stop
  }
}
