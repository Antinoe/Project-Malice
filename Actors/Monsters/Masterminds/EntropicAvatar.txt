Class PM_EntropicAvatar : PMMonsterBase
{

	int MeleeSwings;

	Default
	{
		Health 2000;
		Radius 28;//26;
		Height 90;//89;
		Mass 999999;
		Speed 20;
		PainChance 5;
		Monster;
		MeleeThreshold 325;
		MeleeRange 110;
		MaxStepHeight 80;
		MaxDropOffHeight 80;
		Species "VoidElder";
		Tag "EN?ROP?C AV??AR";
		+NOCLIP;
		+NORADIUSDMG;
		+FLOORCLIP;
		+ALWAYSFAST;
		+BOSS;
		+NOINFIGHTING;
		+DONTHARMSPECIES;
		+LOOKALLAROUND;
		+BRIGHT;
		+SLIDESONWALLS;
		+NOEXTREMEDEATH;
		+THRUSPECIES;
		+DONTHARMCLASS;
		+DONTFALL;
		+NOICEDEATH;
		+DROPOFF;
		+NOBLOCKMONST;
		+NOPAIN;
		+BRIGHT;
		BloodType "PM_EntAvatarGlitchLong";
		Obituary "%o was hunted.";
		HitObituary "%o was eviscerated.";
		TeleFogSourceType "PM_SmallDemonicTeleportFog";
		TeleFogDestType "PM_SmallDemonicTeleportFog";
	}
	
	States
	{

//////////////////////////////////////////////////////////////JOJO POSE
	
	Spawn:
		TNT1 A 0 A_StopSound(CHAN_ITEM);
		TNT1 A 0 A_StopSound(CHAN_VOICE);
		TNT1 A 0 A_AttachLightDef("ENTITY-Aurora","ENTITYAurora");
	Floaty:
		TNT1 A 0;
		//TNT1 A 0 A_QuakeEx(1,1,1,9,0,750,"*");
		TNT1 A 0 {bFLOATBOB = true;} //A_ChangeFlag("FLOATBOB",true);
		RUNR A 1 A_Look;
		loop;
		
//////////////////////////////////////////////////////////////STILL JOJO
		
	See:
		TNT1 A 0 A_StartSound("EntAva/Giggle",CHAN_VOICE,CHANF_LOOP);
		TNT1 A 0 A_StartSound("EntAva/ScreamLoop1",CHAN_ITEM,CHANF_LOOP,0.8);
		TNT1 A 0 A_AttachLightDef("ENTITY-Aurora","ENTITYAurora");
	FloatyLooky:
		TNT1 A 0;
		RUNR AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1
			{
			A_FaceTarget();
			{bFLOATBOB = true;}
			A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
			A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
			A_JumpIfCloser(300,"ROAR");
			}
		Goto ROAR;
		
//////////////////////////////////////////////////////////////YELL AT YOU
		
	ROAR:
		TNT1 A 0 A_StopSound(CHAN_ITEM);
		TNT1 A 0 A_StopSound(CHAN_VOICE);
		TNT1 A 0 {bFLOATBOB = false;}
		TNT1 A 0 A_RemoveLight("ENTITY-Aurora");
		
		TNT1 A 0 A_StartSound("EntAva/Slam",CHAN_VOICE,0,1);
		TNT1 A 0 A_QuakeEx(2,2,2,10,0,750,"*");
		RUNR D 16;	
		TNT1 A 0 A_StartSound("EntAva/Roar",CHAN_ITEM,0,1);
		
		TNT1 A 0 A_QuakeEx(2,2,2,30,0,1000,"*");
		RUNR EHEGGEHHEHEGGFFEEEFFFFEEFGGEFFFEGEGEFEGGGGGEFGGEEEHHEEGHGHEEHFFHEGHGHFHEGHFEHEHFHHHEG 1 Light("PM_HugeFastHorrorBlackflash")
		{
		 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		 A_FaceTarget();
		}
		RUNR D 5 A_FaceTarget();
		Goto StartMoving;
//////////////////////////////////////////////////////////////START LOOPS
	StartMoving:
		TNT1 A 0 A_StartSound("EntAva/IdleScreaming",CHAN_ITEM,CHANF_LOOP,1);
		TNT1 A 0 A_StartSound("EntAva/Giggle",CHAN_VOICE,CHANF_LOOP);
	NewWalkCycle:
		TNT1 A 0 A_AttachLightDef("ENTITY-Aurora","ENTITYAurora");
		TNT1 A 0 A_jump(256,"WalkForward","WalkRight","WalkLeft");
//////////////////////////////////////////////////////////////WALK STRAIGHT
	WalkForward:
		RUW2 AAAA 1 
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;		
		RUW2 BBBB 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW2 CCCC 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		TNT1 A 0 A_jump(128,"NewWalkCycle");
		RUW2 DDDD 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW2 FFFF 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW2 FFFF 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		Goto NewWalkCycle;
		
//////////////////////////////////////////////////////////////PHASE WALK
	PhaseWalk:
		TNT1 A 0 A_RemoveLight("ENTITY-Aurora");
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(null,null);
		RUW2 AAAA 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase(null,null);
		RUW2 BBBB 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase;
		RUW2 CCCC 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase(null,null);
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		TNT1 AAAAAAAAAAAAAAAA 1 A_Chase(null,null);
		RUW2 DDDD 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase;
		RUW2 EEEE 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase(null,null);
		RUW2 FFFF 1 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		TNT1 A 0 A_Jump(180,"PhaseWalk");
		Goto NewWalkCycle;	
//////////////////////////////////////////////////////////////WALK RIGHT	
	WalkRight:
		RUW3 AAAA 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW3 BBBB 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW3 CCCC 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		TNT1 A 0 A_jump(128,"NewWalkCycle");
		RUW3 DDDD 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW3 EEEE 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW3 FFFF 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		Goto NewWalkCycle;
//////////////////////////////////////////////////////////////WALK LEFT
		
	WalkLeft:
		RUW1 AAAA 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW1 BBBB 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW1 CCCC 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		TNT1 A 0 A_jump(128,"NewWalkCycle");
		RUW1 DDDD 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW1 EEEE 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		RUW1 FFFF 1
		{
		A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(radius,-radius),0,FRandom(0,height));
		}
		TNT1 AAA 0 A_Chase;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_StartSound("EntAva/Footstep",CHAN_7,0,1);
		Goto NewWalkCycle;
//////////////////////////////////////////////////////////////TELEPORT
	Spaz:
	    TNT1 A 0 A_StopSound(CHAN_6);
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		
		TNT1 A 0 A_SetSpeed(200);
		
		TNT1 A 0 A_StartSound("EntAva/Laugh",CHAN_ITEM,0,1);
		
		RUW2 ABCDABCDABCD 2 {A_chase(null,null); A_SetScale(frandom(.97,1.03),frandom(.99,1.01)); A_SpawnItemEx("PM_EntAvatarGlitchLONG",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));}
		
		TNT1 A 0 A_SetSpeed(20);
		Goto NewWalkCycle;
		
//////////////////////////////////////////////////////////////GLIDE
		
	Missile:
		TNT1 A 0 A_jump(168,"spaz","NewWalkCycle","PhaseWalk","IceBreath");
		TNT1 A 0 A_jump(120,"NewWalkCycle");
		TNT1 A 0 A_FaceTarget;
		TNT1 A 0 A_StartSound("EntAva/ChargeRoar",CHAN_ITEM,0,1);
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		TNT1 A 0 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitchLONG",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC AAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-14);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		TNT1 A 0 A_Recoil(-12);
		RUNC AAAAA 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		RUNC BBBBB 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		RUNC BBBBB 1
		{
		 A_SetScale(frandom(.91,1.09),frandom(.96,1.04));
		 A_SpawnItemEx("PM_EntAvatarGlitchLong",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		}
		TNT1 A 0 A_JumpIfCloser(200,"Melee");
		Goto StartMoving;
	IceBreath:
		RUW1 FFF 4 A_FaceTarget();
		TNT1 A 0 A_StartSound("PM/AvatarBreathe",CHAN_7,CHANF_LOOPING);
		RUNR EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 1
			{
			A_FaceTarget(1,1);
			A_SpawnProjectile("PM_AvatarFreezeBreath",80,0,0,CMF_AIMDIRECTION,pitch*1+2);
			A_SpawnParticleEx
				(
				"FFFFFF",
				TexMan.CheckForTexture("DB26L0"),
				style: STYLE_Add,
				flags: SPF_FULLBRIGHT|SPF_RELATIVE|SPF_ROLL,
				lifetime: random(50,350),
				size: frandom(5,22),
				angle: 0,
				xoff: 5,
				yoff: random(-3,3),
				zoff: 80,
				velx: frandom(10,30),
				vely: frandom(-3,3),
				velz: frandom(-3,3),
				accelx: 0,
				accely: 0,
				accelz: 0,
				startalphaf: 1.0,
				fadestepf: -1,
				sizestep: -0.1,
				startroll: random(-180,180),
				rollvel: random(-30,30),
				rollacc: 0
				);
				A_SpawnParticleEx
				(
				"FFFFFF",
				TexMan.CheckForTexture("DB26L0"),
				style: STYLE_Add,
				flags: SPF_FULLBRIGHT|SPF_RELATIVE|SPF_ROLL,
				lifetime: random(50,350),
				size: frandom(2,22),
				angle: 0,
				xoff: 5,
				yoff: random(-3,3),
				zoff: 80,
				velx: frandom(10,30),
				vely: frandom(-3,3),
				velz: frandom(-3,3),
				accelx: 0,
				accely: 0,
				accelz: 0,
				startalphaf: 1.0,
				fadestepf: -1,
				sizestep: -0.1,
				startroll: random(-180,180),
				rollvel: random(-30,30),
				rollacc: 0
				);
			}
		TNT1 A 0 A_StopSound(CHAN_7);
		RUNR EFGDDD 4 A_FaceTarget();
		Goto StartMoving;
		
//////////////////////////////////////////////////////////////MELEE
		
	Melee:
		TNT1 A 0 A_jump(64,"MULCHSTART");
		
		TNT1 A 0 A_FaceTarget;
		
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC A 2;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC A 2;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC A 2;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC A 2;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC A 2;
		
		TNT1 A 0 A_FaceTarget;
		TNT1 A 0 A_StartSound("EntAva/Yell",CHAN_ITEM,0,1);
		TNT1 A 0 A_Recoil(-6);
		
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC B 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC B 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC B 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC B 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC B 1;
		
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_CustomMeleeAttack(35,"EntAva/Drag","","Melee");
		
		TNT1 A 0 A_FaceTarget;
		
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC C 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC C 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC C 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC C 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC C 1;
		
		TNT1 A 0 A_FaceTarget;
		TNT1 A 0 A_StartSound("EntAva/Yell",CHAN_ITEM,0,1);
		TNT1 A 0 A_Recoil(-6);
		
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC D 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC D 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC D 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC D 1;
		TNT1 A 0 A_SetScale(frandom(.93,1.07),frandom(.97,1.03));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNC D 1;
		
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_CustomMeleeAttack(35,"EntAva/Drag","","Melee");
		
		TNT1 A 0 A_jump(168,"Spaz");
		Goto StartMoving;
		
//////////////////////////////////////////////////////////////FAST MELEE
		
	MULCHSTART:
	    TNT1 A 0 A_StartSound("EntAva/MulchLoop",CHAN_6,CHANF_LOOP,1);
		RUNC AAAA 5 A_FaceTarget;
	MULCH:
		RUNC AAA 1;
		//TNT1 A 0 A_StartSound("ENTITY/MELEE/YELL",CHAN_ITEM,0,1);
		TNT1 A 0 A_Recoil(-4);
		RUNC BB 1;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_CustomMeleeAttack(35,"EntAva/Drag","","Melee");
		RUNC CC 1;
		//TNT1 A 0 A_StartSound("ENTITY/MELEE/YELL",CHAN_ITEM,0,1);
		TNT1 A 0 A_Recoil(-4);
		RUNC DD 1;
		TNT1 A 0 A_QuakeEx(2,2,2,5,0,500,"*");
		TNT1 A 0 A_CustomMeleeAttack(35,"EntAva/Drag","","Melee");
		TNT1 A 0 A_jump(220,"MULCH");
		Goto Spaz;
		
//////////////////////////////////////////////////////////////DEATHYELL
		
	Death:
		TNT1 A 0 A_StopSound(CHAN_7);
		TNT1 A 0 A_StartSound("EntAva/Roar",CHAN_ITEM,0,1);		
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		TNT1 A 0 A_SetScale(frandom(.97,1.03),frandom(.99,1.01));
		TNT1 A 0 A_SpawnItemEx("PM_EntAvatarGlitch",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));
		RUNR D 1;
		
		TNT1 A 0 A_SetSpeed(200);
		
		//TNT1 A 0 A_StartSound("ENTITY/LAUGH",CHAN_ITEM,0,1);
		
		RUW2 ABCDABCDABCD 2 {A_wander(); A_SetScale(frandom(.97,1.03),frandom(.99,1.01)); A_SpawnItemEx("PM_EntAvatarGlitchLONG",FRandom(invoker.Radius,-invoker.Radius),0,FRandom(0,invoker.Height));}

		Stop;
	}
}


Class PM_AvatarFreezeBreath : Actor
{
	Default
	{
		Radius 4;
		Height 8;
		Speed 24;
		DamageFunction (0);
		RenderStyle "Add";
		DamageType "Ice";
		Alpha 0.65;
		Scale 0.1;
		SeeSound "";
		DeathSound "";
		PROJECTILE;
		+THRUGHOST
		+FORCEXYBILLBOARD
		+ROLLSPRITE
		+ROLLCENTER
		+RIPPER
	}

	States
	{
		Spawn:
			TNT1 A 0;
			TNT1 A 0 A_StartSound("Avatar/WindPull",Chan_6,CHANF_LOOPING);
			TNT1 A 0 A_SetScale(frandom(0.05,0.15));
			TNT1 A 0 A_SetRoll(frandom(-180,180));
		Looper:
			GNSM K 5
				{
				A_FadeOut(0.005);
				A_Explode(8,70,0,false,1,0,0,"","Ice");
				A_SetScale(scale.x+0.024);
				A_SpawnParticleEx
				(
				"",
				TexMan.CheckForTexture("GNSMK0"),
				style: STYLE_Add,
				flags: SPF_ROLL|SPF_RELATIVE,
				lifetime: random(10,130),
				size: frandom(3,70),
				angle: 0,
				xoff: random(-30,50),
				yoff: random(-20,20),
				zoff: random(-10,10),
				velx: frandom(-1,5),
				vely: frandom(-5,5),
				velz: frandom(-1,1),
				accelx: frandom(-0.05,0.05),
				accely: frandom(-0.1,0.1),
				accelz: frandom(-0.05,0.05),
				startalphaf: frandom(0.1,0.7),
				fadestepf: -1,
				sizestep: frandom(1,7),
				startroll: random(-180,180),
				rollvel: frandom(-5,5),
				rollacc: 0
				);
				A_SpawnParticleEx
				(
				"",
				TexMan.CheckForTexture("GNSMK0"),
				style: STYLE_Add,
				flags: SPF_ROLL|SPF_RELATIVE,
				lifetime: random(50,130),
				size: frandom(3,40),
				angle: 0,
				xoff: random(-30,0),
				yoff: random(-1,1),
				zoff: random(-1,1),
				velx: frandom(5,20),
				vely: frandom(-1,1),
				velz: frandom(-1,1),
				accelx: frandom(-0.05,0.05),
				accely: frandom(-0.05,0.05),
				accelz: frandom(-0.05,0.05),
				startalphaf: frandom(0.1,0.7),
				fadestepf: -1,
				sizestep: frandom(1,3),
				startroll: random(-180,180),
				rollvel: frandom(-6,6),
				rollacc: 0
				);
				}
				Loop;
		Death:
			TNT1 A 0;
			Stop;
	}
}



//////////////////////////////////////////////////////////////GLITCHY FX

Class PM_EntAvatarGlitch : Actor
{
	Default
	{	
		+NOBLOCKMAP
		+NOCLIP
		+NOGRAVITY
		+DONTSPLASH
		+NOTELEPORT
		+FORCEXYBILLBOARD
	}
	States
	{
	Spawn:
		TNT1 A 0;
		TNT1 A 0 A_AttachLightDef("ENTITY-Particle-Aurora","ENTITYParticleAurora");
		
		TNT1 A 1 A_Jump(224,2,3,4,5,6,7,8);
		
		RUNG A 2;
		Stop;
		RUNG B 2;
		Stop;
		RUNG C 2;
		Stop;
		RUNG D 2;
		Stop;
		RUNG E 2;
		Stop;
		RUNG F 2;
		Stop;
		RUNG G 2;
		Stop;
		RUNG H 2;
		Stop;
	}
}

Class PM_EntAvatarGlitchLong : Actor
{
	Default
	{	
		+NOBLOCKMAP
		+NOCLIP
		+NOGRAVITY
		+DONTSPLASH
		+NOTELEPORT
		+FORCEXYBILLBOARD
	}
	States
	{
	Spawn:
		TNT1 A 0;
		TNT1 A 0 A_AttachLightDef("ENTITY-Particle-Aurora","ENTITYParticleAurora");
		
		TNT1 A 1 A_Jump(224,3,5,7,9,11,13,15);
		
		RUNG A 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG B 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG C 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG D 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG E 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG F 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG G 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
		RUNG H 2;
		TNT1 A 0 A_Jump(128,"Spawn");
		Stop;
	}
}