actor PM_Abhorrent : fatso
 {
 health 600
 painchance 100
 Speed 5
 Scale 1.1
 SeeSound "Abhorrent/Sight"
 PainSound "Abhorrent/Pain"
 DeathSound "Abhorrent/Death"
 ActiveSound "Abhorrent/Active"
 Bloodcolor "Black"
 Species "Mancubus"
 +DONTHARMSPECIES
 MinMissileChance 2000
 //DropItem "RagePoint1"
 Obituary "An Abhorrent satisfied its quench for %o's soul."
 Tag "Abhorrent"
 //+NOINFIGHTING
 +DONTHURTSPECIES
  states
 {
  Spawn:
  Idle:
    ABHR A 10 A_look
    Loop
  See:
	TNT1 A 0 A_ChangeFlag(SHOOTABLE, True)
	TNT1 A 0 A_ChangeFlag(NOPAIN,0)
	TNT1 A 0 A_Jump(30,"Phase")
	TNT1 A 0 A_PlaySound("MancubStep")
    ABHR AAA 2 A_Chase
	ABHR BBBCCC 2 A_Chase
	TNT1 A 0 A_PlaySound("MancubStep")
	ABHR DDD 2 A_Chase
	ABHR EEEFFF 2 A_Chase
    Loop
  Missile:
	TNT1 A 0 A_ChangeFlag(NOPAIN,1)
	ABHR G 1 A_PlaySound("Abhorrent/Attack",CHAN_6)
	ABHR GGGGGGG 5 A_FaceTarget
	TNT1 A 0 A_PlaySound("GenericMancShot")
	TNT1 A 0 A_CustomMissile("BlueSoulFlare", 20, 34,-10)
	TNT1 A 0 A_CustomMissile("BlueSoulFlare", 20,-34,10)
	TNT1 AAAAA 0 A_CustomMissile("MancuBlueEmbers",30,30,random(-90,90),CMF_OFFSETPITCH,random(-90,90))
	TNT1 AAAAA 0 A_CustomMissile("MancuBlueEmbers",30,-30,random(-90,90),CMF_OFFSETPITCH,random(-90,90))
    ABHR H 6 Light("SoulHarvesterBall2") 
	{
	A_CustomMissile("PM_AbhorBall", 20,-34,10);
	A_CustomMissile("PM_AbhorBall", 20, 34,-10);
	}
	TNT1 A 0 A_ChangeFlag(NOPAIN,0)
	ABHR IG 12 A_FaceTarget
	Goto See
  Phase:
	TNT1 AAA 0 A_CustomMissile("AbhorBallExplode",random(10,45),0,random(0,360),2,random(0,360))
	ABHR G 5 A_FaceTarget
	TNT1 AAA 0 A_CustomMissile("AbhorBallExplode",random(10,45),0,random(0,360),2,random(0,360))
	TNT1 A 0 A_SetSpeed(15)
	TNT1 A 0 A_SetRenderStyle(0.8,STYLE_Add)
	TNT1 A 0 A_PlaySound("Abhor/Phase",CHAN_7)
	TNT1 A 0 A_ChangeFlag(SHOOTABLE, False)
	ABHR UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU 1 Bright Light("SoulHarvesterBall1")
	{
	A_Wander;
	A_SpawnItemEx("AbhorTrail");
	}
	TNT1 A 0 A_SetRenderStyle(0.8,STYLE_Normal)
	TNT1 A 0 A_SetSpeed(5)
	TNT1 A 0 A_ChangeFlag(SHOOTABLE, True)
	TNT1 AAAAA 0 A_CustomMissile("AbhorBallExplode",random(10,45),0,random(0,360),2,random(0,360))
	ABHR J 10 A_FaceTarget
	Goto See
  Pain:
    ABHR J 1
	TNT1 A 0 A_ChangeFlag(SHOOTABLE, True)
	TNT1 A 0 A_PlaySound("MancubStep")
    ABHR J 13 A_Pain
    Goto See
  Death:
	   ABHR K 6
       ABHR L 6 A_Scream
       ABHR M 6
       ABHR NOP 6 A_CustomMissile("PM_AbhorSmallBall",10,0,random(0,360),CMF_OFFSETPITCH | CMF_TRACKOWNER,random(-80,80))
	   TNT1 A 0 A_PlaySound("Corpse/Fall",CHAN_6)
	   ABHR QR 6 A_CustomMissile("PM_AbhorSmallBall",10,0,random(0,360),CMF_OFFSETPITCH | CMF_TRACKOWNER,random(-80,80))
       ABHR S 6 A_NoBlocking
       ABHR T -1
       Stop
    Stop
  Raise:
	ABHR SRQPONMLK 6
    Goto See
  }
}

ACTOR AbhorTrail
{
+CLIENTSIDEONLY
+NOINTERACTION
RenderStyle Add
Alpha 0.60
States
{
Spawn:
    ABHR U 1 A_FadeOut(0.06)
    Loop
    }
}

Actor PM_AbhorBall : Fatshot
{
    Radius 8
    Height 6
    Scale 1.
    Speed 11
	Damage (random(40,40))
    Renderstyle "Add"
    seesound "Abhor/BallWhiz"
	deathsound "Abhor/BallExp"
    PROJECTILE
    +SEEKERMISSILE
  States
  {
  Spawn:
    ABHB AABB 1 Bright Bright Light("SoulHarvesterBall1")
	{
	A_Weave(1, 1, 1.5, 0);
	A_SeekerMissile(1,1,SMF_PRECISE);
	A_SpawnItemEx("BlueSoulFlareSmall",-12);
	A_SpawnItemEx("BlueFireTrailEffect",0,random(-9,9),random(-9,9));
	A_SpawnItemEx("AbhorBallTrail", 0, 0, 0, 0, 0, 0, 180, SXF_CLIENTSIDE);
	}
    Loop
  Death:
	TNT1 A 0 A_SpawnItemEx("BlueExplosionFlareSmall",0,0,0)
	TNT1 AAA 0 A_CustomMissile("AbhorBallExplode",0,0,random(0,360),2,random(0,360))
	TNT1 AAAAAAAA 0 A_CustomMissile("PM_AbhorSmallBall",0,0,random(0,360),CMF_OFFSETPITCH | CMF_TRACKOWNER,random(-80,80))
    SHBA CDEFGHIJKL 4 Bright Light("SoulHarvesterBall2")
    Stop
  }
}

Actor PM_AbhorSmallBall
{
    Radius 5
    Height 5
    Scale 0.3
    Speed 3
    Damage 1
    Renderstyle "Add"
    //SeeSound "harvester/scream"
    DeathSound "Abhor/SoulExp"
    PROJECTILE
    +SEEKERMISSILE
  States
  {
  Spawn:
    SHBA AABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABBAABB 1 Bright
	{
	A_Jump(7,"Death");
	A_SeekerMissile(1,2);
	//A_SpawnItemEx("SoulBallTrail", 0, 0, 0, 0, 0, 0, 180, SXF_CLIENTSIDE);
	A_Weave(1, 1, 1.5, 0);
	}
  Death:
    SHBA CDEFGHIJKL 4 Bright
    Stop
  }
}

Actor AbhorBallTrail
  {
    Radius 1
    Height 1
    Speed 0
    RENDERSTYLE "ADD"
    ALPHA 0.05
	Scale 1.8
    PROJECTILE
    +NOCLIP
  States
  {
  Spawn:
  Death:
    SBTR H 2
    SBTR ABCDEFG 4 Bright
    Stop
  }
}

Actor MancuBlueEmbers
{
  +CLIENTSIDEONLY
  +DOOMBOUNCE
  +MISSILE
  Height 0
  Radius 0
  Damage 0
  Mass 0
  Speed 3
  Scale 0.055
  RENDERSTYLE ADD
  BounceFactor 0.4
  Gravity 0.5
  +Bright
  States
{
  Spawn:
	SPKO S 3 Bright A_FadeOut(0.08)
  Loop
  }
}

Actor BlueFireEffect
{
  +NOINTERACTION
  +CLIENTSIDEONLY
  +ROLLSPRITE
  Renderstyle Add
  Scale 0.2
  +Bright
  States
  {
  Spawn:
	TNT1 A 2
	Go:
	TNT1 A 0 A_SetRoll(random(0,360))
	Go2:
	TNT1 A 0 A_SetScale(ScaleX-0.017)
	FIR1 B 1 A_FadeOut(0.08)
	Loop
	}
}

Actor BlueFireTrailEffect
{
  +NOINTERACTION
  +CLIENTSIDEONLY
  +ROLLSPRITE
  Renderstyle Add
  Scale 0.2
  Alpha 0.4
  +Bright
  States
  {
  Spawn:
	TNT1 A 3
	Go:
	TNT1 A 0 A_SetRoll(random(0,360))
	Go2:
	TNT1 A 0 A_SetScale(ScaleX-0.017)
	FIR1 B 1 A_FadeOut(0.08)
	Loop
	}
}


Actor AbhorBallExplode
{
	Scale 0.9
	Damage 0
	Missile
	Projectile
	Renderstyle Add
	+CLIENTSIDEONLY
	+NOINTERACTION
	+ROLLSPRITE
	+Bright
	Speed 3
	States
{
Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360))
	FXPB AABBCDEFGHIJKLM 1 Bright A_FadeOut(0.04)
	Stop
	}
}